<header>
  <nav id="main-header" class="py-1 mb-3 navbar navbar-expand-sm text-dark">
    <span class="navbar-brand mr-auto float-right">Paid tickets</span>

    <!--TODO: replace [routerLink] on ngForm-->
    <form class="form-inline"
          id="FormFilterDate"
          [routerLink]="['/paid-tickets']"
          method="post">

      <ng-container *ngIf="showSearch === 'none'">

        <div class="form-group">
          <input #startDate
                 type="date"
                 class="form-control"
                 value="">
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input #finishDate
               type="date"
               class="form-control"
               value="">
        &nbsp;&nbsp;&nbsp;
        <div>
          <button type="button" class="btn btn-dark"
                  (click)="showSearch='block'; onSearchPaidTicketsByDate(startDate.value, finishDate.value);">
            Search
          </button>
        </div>

      </ng-container>

      <ng-container *ngIf="showSearch === 'block'">

        <div class="float-right">
          <button type="button" class="btn btn-dark"
                  (click)="onReplace(); showSearch = 'none'">
            Back
          </button>
        </div>

      </ng-container>

    </form>

  </nav>
</header>

<section>
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        <table class="table table-striped">
          <ng-container *ngIf="searchPaidTickets">
            <thead class="thead-inverse">

            <tr>
              <th style="color: black">#</th>
              <th style="color: black">Date</th>
              <th style="color: black">From</th>
              <th style="color: black">To</th>
              <th style="color: black">Cost</th>
              <th style="color: black">E-mail</th>
            </tr>

            </thead>

            <tbody>

            <tr *ngFor="let paidTicket of paidTickets; let index = index">
              <td>{{index + 1}}</td>
              <td>{{paidTicket.paymentDate | date: 'longDate'}}</td>
              <td>{{paidTicket.fromCity}}</td>
              <td>{{paidTicket.toCity}}</td>
              <td>{{paidTicket.ticketCost}}</td>
              <td>{{paidTicket.email}}</td>

              <td class="float-right">
                <button type="button" class="btn btn-dark"
                        (click)="openDeletePaidTicketDialog(); deletePaidTicket = paidTicket.id">
                  Delete
                </button>
              </td>
            </tr>
            </tbody>
          </ng-container>

          <ng-container *ngIf="!searchPaidTickets">
            <thead class="thead-inverse">
            <tr>
              <th style="color: black">#</th>
              <th style="color: black">From</th>
              <th style="color: black">To</th>
              <th style="color: black">Date</th>
              <th style="color: black">Cost</th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let paidTicket of paidTickets; let index = index">
              <td>{{index + 1}}</td>
              <td>{{paidTicket.fromCity}}</td>
              <td>{{paidTicket.toCity}}</td>
              <td>{{paidTicket.paymentDate | date: 'longDate'}}</td>
              <td>{{paidTicket.ticketCost}}</td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td>Total: {{ticketCount}}</td>
              <th>Count: {{totalSum}}<th>
            </tr>

            </tbody>
          </ng-container>
        </table>
      </div>
    </div>
  </div>
</section>


<app-delete-paid-ticket-dialog [display]="displayDeletePaidTicketModal"
                               [deletePaidTicket]="deletePaidTicket"
                               (displayDeletePaidTicketModal)="receiveEventToCloseDeleteDialog($event)">

</app-delete-paid-ticket-dialog>
